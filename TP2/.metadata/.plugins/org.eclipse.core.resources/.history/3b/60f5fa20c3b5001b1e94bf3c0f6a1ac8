/*
 ============================================================================
 Name        : employe.c
 Author      : 
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>

#include "utn.h"
#include "arrayEmployees.h"

#define TAM 1000

int main(void)
{
	setbuf(stdout,NULL);


	    Employee nomina[TAM];
	    int opcion;
	    int id=20000;
	    int auxId;
	    int auxIndice;
	    int decision;

	    initEmployees(nomina,TAM);

	    do
	    {
	        if(utn_getNumero(&opcion,
	                         "\n---------------------\n"
	                         "ABM Empleado\n"
	                         "---------------------\n"
	                         "\n1.Alta Empleado"
	                         "\n2.Baja Empleado"
	                         "\n3.Modificar Empleado"
	                         "\n4.Listar Empleados"
	                         "\n5.Ordenar Empleados"
	                         "\n6.Listar sectores"
	                         "\n7.Listar comidas"
	                         "\n8.Listar almuerzos"
	                         "\n9.Alta Almuerzo"
	                         "\n10.------------"
	                         "\n11.Informes"
	                         "\n12.Salir\n\n"
	                         "Ingrese opcion:",
	                         "Opcion no valida",1,12,3)==0)
	        {
	            switch(opcion)
	            {
	                case 1:
	                    if(altaEmpleado(nomina,TAM,&id)==0)
	                    {
	                        system("cls");
	                        printf("Alta empleado exitosa\n");
	                        system("pause");
	                    }
	                    else
	                    {
	                        system("cls");
	                        printf("No hay lugar\n");
	                        system("pause");
	                    }
	                    break;
	                case 2:
	                    mostrarEmpleados(nomina,TAM);
	                    if(utn_getNumero(&auxId,
	                                     "\nIngrese ID del empleado a eliminar",
	                                     "\nError, ID no valido",20000,id,1)==0)
	                    {
	                        auxIndice=findEmployeeById(nomina,TAM,auxId);
	                        if(auxIndice>=0 && mostrarEmpleado(&nomina[auxIndice])==0)
	                        {
	                            if(utn_getNumero(&decision,
	                                             "Desea eliminarlo?\n"
	                                             "\n1.[si]\n"
	                                             "\n2.[no]\n",
	                                             "Opcion no valida",1,2,1)==0)
	                            {
	                                if(decision==1 &&
	                                        removeEmployee(nomina,TAM,auxIndice)==0)
	                                {
	                                    system("cls");
	                                    printf("\nBaja realizada con exito\n");
	                                    system("pause");
	                                }
	                                else
	                                {
	                                    system("cls");
	                                    printf("\nDar de baja cancelada\n");
	                                    system("pause");
	                                }
	                            }
	                        }
	                    }
	                    break;
	                case 3:
	                    mostrarEmpleados(nomina,TAM);
	                    if(utn_getNumero(&auxId,
	                                     "\nIngrese id del empleado a modificar",
	                                     "\nError, id no valido",20000,id,1)==0)
	                    {
	                        auxIndice=findEmployeeById(nomina,TAM,auxId);
	                        if(auxIndice>=0 && mostrarEmpleado(&nomina[auxIndice],sectores,TAM_SEC)==0)
	                        {
	                            if(utn_getNumero(&decision,
	                                             "Desea modificarlo?\n"
	                                             "\n1.[si]\n"
	                                             "\n2.[no]\n",
	                                             "Opcion no valida",1,2,1)==0)
	                            {
	                                if(decision==1 &&
	                                        menuModificar(nomina,TAM,auxIndice)==0)
	                                {
	                                    system("cls");
	                                    printf("\nModificacion realizada con exito\n");
	                                    system("pause");
	                                }
	                                else
	                                {
	                                    system("cls");
	                                    printf("\nModificacion cancelada\n");
	                                    system("pause");
	                                }
	                            }
	                        }
	                    }
	                    break;
	                case 4:
	                    system("cls");
	                    mostrarEmpleados(nomina,TAM,sectores,TAM_SEC);
	                    system("pause");
	                    break;
	                case 5:
	                    if(menuOrdenar(nomina,TAM)==0)
	                    {
	                        system("cls");
	                        printf("Ordenamiento realizado con exito\n");
	                        system("pause");
	                    }
	                    else
	                    {
	                        system("cls");
	                        printf("Ordenamiento cancelado\n");
	                        system("pause");
	                    }
	                    break;
	                case 6:
	                    system("cls");
	                    mostrarSectores(sectores,TAM_SEC);
	                    system("pause");
	                    break;
	                case 7:
	                    system("cls");
	                    mostrarComidas(comidas,TAMC);
	                    system("pause");
	                    break;
	                case 8:
	                    system("cls");
	                    mostrarAlmuerzos(almuerzos,TAMA,nomina,TAM,comidas,TAMC);
	                    system("pause");
	                    break;
	                case 9:
	                    if(altaAlmuerzo(almuerzos,TAMA,comidas,TAMC,nomina,TAM,sectores,TAM_SEC,&nextAlmuerzo)==0)
	                    {
	                        system("cls");
	                        printf("\nAlta Almuerzo exitosa\n\n");
	                        system("pause");
	                    }
	                    else
	                    {
	                        system("cls");
	                        printf("\nNo hay lugar\n\n");
	                        system("pause");
	                    }
	                    break;
	                case 10:
	                    system("cls");

	                    system("pause");
	                    break;
	                case 11:
	                    system("cls");
	                    menuInformes(nomina,TAM,sectores,TAM_SEC,almuerzos,TAMA,comidas,TAMC);
	                    system("pause");
	                    break;
	                case 12:
	                    printf("Salir");
	                    break;
	            }
	        }
	    }while(opcion!=12);


	return EXIT_SUCCESS;
}
